@using Microsoft.AspNet.Identity
<!DOCTYPE html>


<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>HRMS</title>
    <link href="~/Content/summernote/summernote.css" rel="stylesheet" />
    <!-- Bootstrap CSS CDN -->
    @*<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">*@
    <link href="~/Content/Offline/bootstrap.min.css" rel="stylesheet" />
    <!-- Our Custom CSS -->
    <link href="~/Content/Layout.css" rel="stylesheet" />

    <!-- Font Awesome JS -->
    @*<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>*@
    <script src="~/Scripts/offline/solid.js"></script>
    <script src="~/Scripts/offline/fontawesome.js"></script>
    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    @*<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>*@
    <!-- Popper.JS -->
    <script src="~/Scripts/offline/popper.min.js"></script>
    @*<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>*@
    <!-- Bootstrap JS -->
    <script src="~/Scripts/offline/bootstrap.min.js"></script>
    @*<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>*@
    <link href="~/Content/summernote/summernote.css" rel="stylesheet" />
    <script src="~/Content/summernote/summernote.js"></script>
    @*<link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote-bs4.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote-bs4.js"></script>*@
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    @*<script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>*@
    @*<script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>*@
    <script src="~/Scripts/offline/jquery.dataTables.min.js"></script>
    <link href="~/Content/jquery.dataTables.css" rel="stylesheet" />
    @*<link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">*@
    @*<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css" crossorigin="anonymous">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.js"  crossorigin="anonymous"></script>*@
    @*<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>*@
    <script src="~/Content/Offline/jquery-ui.js"></script>
    <link href="~/Content/Offline/jquery-ui.min.css" rel="stylesheet" />
    @*<link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" rel="stylesheet" />*@

    <link href="~/Content/Offline/multi-select.min.css" rel="stylesheet" />
    @*<link href="https://cdnjs.cloudflare.com/ajax/libs/multi-select/0.9.12/css/multi-select.min.css" rel="stylesheet" />*@
    @*<script src="https://cdnjs.cloudflare.com/ajax/libs/multi-select/0.9.12/js/jquery.multi-select.min.js"></script>*@
    <script src="~/Scripts/offline/jquery.multi-select.min.js"></script>



    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.flash.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.html5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>


    <script src="~/Scripts/select2.min.js"></script>
    <link href="~/Content/Offline/select2.min.css" rel="stylesheet" />

    <script src="~/Content/fullcalendar/main.js"></script>
    <link href="~/Content/fullcalendar/main.css" rel="stylesheet" />


    <style>

        .no-js #loader {
            display: none;
        }

        .js #loader {
            display: block;
            position: absolute;
            left: 100px;
            top: 0;
        }

        .se-pre-con {
            position: fixed;
            visibility: hidden;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background: url(/content/images/Preloader_3.gif) center no-repeat #fff;
        }

        #spinner {
            position: fixed; /* Sit on top of the page content */
            display: none; /* Hidden by default */
            width: 100%; /* Full width (cover the whole page) */
            height: 100%; /* Full height (cover the whole page) */
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.8;
            background: url(/content/images/Preloader_3.gif) center no-repeat #fff;
            /*background-color: rgba(0,0,0,0.5);*/ /* Black background with opacity */
            z-index: 2; /* Specify a stack order in case you're using a different order for other elements */
            cursor: pointer;
        }
    </style>


    <script>




        //function loader() {

        //    $(".se-pre-con").show();
        //    setTimeout(function () {
        //        $(".se-pre-con").fadeOut("slow");
        //    }, 500); //Delay just used for example and must be set to 0.

        //}

    </script>


</head>
<body>
    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">
                
                <h3> <b> <i class="fa fa-globe"></i> HRMS  </b></h3>
            </div>
            <ul class="list-unstyled components">

                <li class="active">




                    <a class="dropdown-toggle" href="/HOME/INDEX" id="loginLink">
                        <i class="fa fa-desktop">  </i>  Dashboard

                    </a>
                    @*@Html.ActionLink("Dashboard", "INDEX", "HOME", routeValues: null, htmlAttributes: new { id = "loginLink", @class = "dropdown-toggle" })*@





                </li>
                <li>


                    <a class="dropdown-toggle" href="/Company/CompanyList" id="loginLink">
                        <i class="fa fa-list">  </i>  Company Master

                    </a>
                    @* @Html.ActionLink("", "", "Company", routeValues: null, htmlAttributes: new { @class = "" })*@

                </li>

                <li>


                    <a class="dropdown-toggle" href="/Company/ExtraCallNotes" id="loginLink">
                        <i class="fa fa-phone">  </i>  Extra Call Notes

                    </a>
                    @* @Html.ActionLink("", "", "Company", routeValues: null, htmlAttributes: new { @class = "" })*@

                </li>



                @if (User.Identity.GetUserName().ToUpper() == "ADMIN@AE.IN")
                {
                    <li>
                        <a class="dropdown-toggle" href="/Data/index" id="loginLink">
                            <i class="fa fa-upload">  </i>  Import Data

                        </a>

                    </li>

                    <li>
                        <a class="dropdown-toggle" href="/Company/Export" id="loginLink">
                            <i class="fa fa-download">  </i>  Export Data

                        </a>

                    </li>
                }


                @*@Html.ActionLink("", "", "Company", routeValues: null, htmlAttributes: new { @class = "" })*@
                @if (User.Identity.GetUserName().ToUpper() == "ADMIN@AE.IN")
                {

                    <li>
                        <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">        <i class="fa fa-user">  </i> Users</a>
                        <ul class="collapse list-unstyled" id="pageSubmenu">
                            <li>



                                @Html.ActionLink("Add Users", "AddUser", "Account", routeValues: null, htmlAttributes: new { @class = "" })


                            </li>
                            <li>
                                @Html.ActionLink("Manage Users", "Users", "Account", routeValues: null, htmlAttributes: new { @class = "" })

                            </li>
                            <li>
                                @Html.ActionLink("Login Request", "LoginRequest", "Account", routeValues: null, htmlAttributes: new { @class = "" })

                            </li>
                            <li>
                                @Html.ActionLink("Login History", "LoginHistory", "Account", routeValues: null, htmlAttributes: new { @class = "" })
                            </li>
                            <li>
                                @Html.ActionLink("Payroll", "Index", "Payroll", routeValues: null, htmlAttributes: new { @class = "" })
                            </li>
                            @*<li>
            <a href="#">Manage Role</a>
        </li>*@
                        </ul>
                    </li>

                    <li>

                        <a href="#pageSubmenu1" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"> <i class="fa fa-cog"> </i> Masters</a>
                        <ul class="collapse list-unstyled" id="pageSubmenu1">
                            @*<li>
                                @Html.ActionLink("Course", "CourseList", "Company", routeValues: null, htmlAttributes: new { @class = "" })


                            </li>
                            <li>
                                @Html.ActionLink("Stream", "StreamList", "Company", routeValues: null, htmlAttributes: new { @class = "" })


                            </li>*@

                            <li>
                                @Html.ActionLink("Color", "ColorMaster", "Company", routeValues: null, htmlAttributes: new { @class = "" })


                            </li>

                            <li>
                                @Html.ActionLink("Sector", "SectorMaster", "Company", routeValues: null, htmlAttributes: new { @class = "" })


                            </li>
                            @*<li>
                                @Html.ActionLink("College", "CollegeMaster", "Company", routeValues: null, htmlAttributes: new { @class = "" })


                            </li>*@
                            <li>
                                @Html.ActionLink("City", "Citylist", "Company", routeValues: null, htmlAttributes: new { @class = "" })


                            </li>
                            <li>
                                @Html.ActionLink("Sub location", "Sublocationlist", "Company", routeValues: null, htmlAttributes: new { @class = "" })


                            </li>
                            <li>
                                @Html.ActionLink("Third Party", "ThirdPartylist", "Company", routeValues: null, htmlAttributes: new { @class = "" })


                            </li>
                        </ul>
                    </li>
                }

            </ul>
            @*<ul class="list-unstyled CTAs">
                    <li>
                        <a href="https://bootstrapious.com/tutorial/files/sidebar.zip" class="download">Download source</a>
                    </li>
                    <li>
                        <a href="https://bootstrapious.com/p/bootstrap-sidebar" class="article">Back to article</a>
                    </li>
                </ul>*@
        </nav>
        <!-- Page Content  -->
        <div id="content">
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" style="background-color:#0747a6;color:white" class="btn">
                        <i class="fas fa-align-left"></i>
                        <span>Menu</span>
                    </button>
                    <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fas fa-align-justify"></i>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">

                            <li class="nav-item">
                                <a class="nav-link active" href="#">Hello   @User.Identity.GetUserName()  </a>
                                @*  @Html.ActionLink("Hello " + User.Identity.GetUserName() + "!", "#", "Manage", routeValues: null, htmlAttributes: new { title = "My Account", @class = "nav-link active" })*@
                            </li>
                            @if (Request.IsAuthenticated)
                            {
                                using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
                                {
                                    @Html.AntiForgeryToken()



                                }
                            }

                            <li class="nav-item">
                                <a class="nav-link" href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
                            </li>


                        </ul>
                    </div>
                </div>
            </nav>


            <div class="modal fade " id="myModal" role="dialog" style="z-index:8000">
                <div class="modal-dialog modal-sm" style="width: 300px;">
                    <div class="modal-content">
                        <div class="modal-header">

                            <h4 class="modal-title">Success</h4>
                        </div>
                        <div class="modal-body">
                            <p> <i style="color:lightgreen" class="fas fa-check-circle fa-3x"></i> Saved Successfully!</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-success" data-dismiss="modal">Ok</button>
                        </div>
                    </div>
                </div>
            </div>
            @if (User.Identity.GetUserName().ToUpper() != "ADMIN@AE.IN")
            {
                <div class="modal fade " id="myReminder" role="dialog" style="z-index:8000">
                    <div class="modal-dialog" style="width: 500px;">
                        <div class="modal-content">
                            <div class="modal-header">

                                <h4 class="modal-title"> <i style="color:lightgreen" class="fas fa-bell fa-2x"></i>  Reminder</h4>
                            </div>
                            <div class="modal-body reminder-body">
                                <p>  Saved Successfully!</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-success" data-dismiss="modal">Remind Later</button>
                            </div>
                        </div>
                    </div>
                </div>
            }
                @RenderBody()



            </div>


    </div>

    

    <script type="text/javascript">

        function CnfSubmenumsgMOdel(msg, Url) {
            debugger;
            var id = "#" + msg;

            $.ajax(
                {
                    url: Url,
                    beforeSend: function () {
                        //  $('#spinner').show();
                        $("#modal .close").click();

                    },
                    type: "Get",
                    success: function (data) {
                        // $('#spinner').hide();


                        // $("#exampleModalScrollable_1").modal('hide');
                        $("#dv_PartialView").html(data);
                        $(".modal-backdrop").remove();
                        $(id).modal('show');

                        $('#myModal').modal('show');
                        setTimeout(function () { $('#myModal').modal('hide'); }, 2000);






                    }

                });
        }
        function CnfSubmenumsg(msg, Url) {
            debugger;
            $("#Id").val();
            $.ajax(
                {
                    url: Url,
                    beforeSend: function () {

                    },
                    type: "Get",
                    success: function (data) {
                        $(".se-pre-con").hide();
                        $("#dv_PartialView").html(data);
                        $("html, body").animate({ scrollTop: 0 }, "fast");


                        $('#myModal').modal('show');
                        setTimeout(function () { $('#myModal').modal('hide'); }, 2000);
                    }
                });
        }


        $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
            });
        });
    </script>

    @*@Scripts.Render("~/bundles/jquery")


        @Scripts.Render("~/bundles/bootstrap")*@


    @RenderSection("scripts", required: false)

    <script type="text/javascript">



    $(document).ready(function () {

        //demo.initChartist();
     var int=   setInterval(function () {


          
         LoadReminder();
        
     },  1800 * 1000); //Every 30 Minutes
       

        demo.initChartist();
        var User = '@User.Identity.GetUserName()';
        $.notify({
            icon: 'pe-7s-gift',
            message: "Welcome <b>" + User

        }, {
                type: 'info',
                timer: 4000
        });

        function LoadReminder() {
            $.get("/company/getReminders", function (data) {
                var table = "<table class='table ReminderList'> <tr> <th>Event</th><th>Company</th> <th></th> </tr>";

                var body = "";
                if (data.length > 0) {
                    for (var i = 0; i < data.length; i++) {


                        var value = localStorage.getItem("DNR-" + data[i].Id);
                       
                        //check if added in Donotremind 
                        if (value != GetDate() && value == null) {
                            
                            var row = "<tr id=" + data[i].Id + "><td>" + data[i].Title + "</td><td>" + data[i].CompanyName + "</td><td> <a onclick='dismiss(" + data[i].Id + ")'><i class='fa fa-trash'></i></a> </td></tr>";
                            body += row;
                        }
                    }
                    if (body != "") {
                        table += body + "</table >";
                        $('#myReminder').modal('show');
                        $('.reminder-body').html(table);
                    }

                }

            });
        }

       

        // attch events to the document object
        // you can add more events here based on
        // what events you want to track
        //$(document).on('click change keypress', function () {

        //    // clear the timeout whenever the event is handled
        //    clearTimeout(popupTimer);

        //    // Reset the timer
        //    popupTimer = setTimeout(displayPopup, TIME_OUT);
        //});


    });

        function dismiss(key) {
            $('#'+key).remove();
            var data = localStorage.getItem('DNR-'+key);            
            if (!data) {
                localStorage.setItem('DNR-' + key, GetDate()); 
            }
            var rowCount = $('.ReminderList tr').length;
            if (rowCount==1) {
                $('#myReminder').modal('hide');
            }
            
        }

        function GetDate() {
            var fullDate = new Date()
            var twoDigitMonth = ((fullDate.getMonth().length + 1) === 1) ? '0' + (fullDate.getMonth() + 1) : (fullDate.getMonth() + 1);
            var currentDate = fullDate.getDate() + "/" + twoDigitMonth + "/" + fullDate.getFullYear();

            return currentDate;
        }

    </script>

    <div id="spinner">      
    </div>
    <div class="se-pre-con">

    </div>
</body>




</html>
